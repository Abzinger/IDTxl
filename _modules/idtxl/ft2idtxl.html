<!DOCTYPE html>




<html lang="en">
  <head>
    <meta charset="utf-8" />
    
    <title>idtxl.ft2idtxl &mdash; IDTxl 0.1 documentation</title>
    <meta name="description" content="">
    <meta name="author" content="">

    

<link rel="stylesheet" href="../../_static/css/basicstrap-base.css" type="text/css" />
<link rel="stylesheet" id="current-theme" href="../../_static/css/bootstrap3/bootswatch-spacelab.css" type="text/css" />
<link rel="stylesheet" id="current-adjust-theme" href="../../_static/css/adjust_theme/bootswatch-spacelab.css" type="text/css" />

<link rel="stylesheet" href="../../_static/css/font-awesome.min.css">

<style type="text/css">
  body {
    padding-top: 60px;
    padding-bottom: 40px;
  }
</style>

<link rel="stylesheet" href="../../_static/css/basicstrap.css" type="text/css" />
<link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
<script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
            URL_ROOT:    '../../',
            VERSION:     '0.1',
            COLLAPSE_INDEX: false,
            FILE_SUFFIX: '.html',
            HAS_SOURCE:  true
  };
</script>
    <script type="text/javascript" src="../../_static/js/jquery.min.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/js/bootstrap3.min.js"></script>
<script type="text/javascript" src="../../_static/js/jquery.cookie.min.js"></script>
<script type="text/javascript" src="../../_static/js/basicstrap.js"></script>
<script type="text/javascript">
</script>
    <link rel="top" title="IDTxl 0.1 documentation" href="../../index.html" />
    <link rel="up" title="Module code" href="../index.html" /> 
  </head>
  <body role="document">
    <div id="navbar-top" class="navbar navbar-fixed-top navbar-default" role="navigation" aria-label="top navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../../index.html">IDTxl 0.1 documentation</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">

            
              <li><a href="../../py-modindex.html" title="Python Module Index" >modules </a></li>
              <li><a href="../../genindex.html" title="General Index" accesskey="I">index </a></li>
              <li><a href="../index.html" accesskey="U">Module code</a></li>
            

            <li class="visible-xs">
                <form class="search form-search form-inline navbar-form navbar-right sp-searchbox" action="../../search.html" method="get">
                  <div class="input-append input-group">
                    <input type="text" class="search-query form-control" name="q" placeholder="Search...">
                    <span class="input-group-btn">
                    <input type="submit" class="btn" value="Go" />
                    </span>
                  </div>
                  <input type="hidden" name="check_keywords" value="yes" />
                  <input type="hidden" name="area" value="default" />
                </form>
            </li>

            

          </ul>

        </div>
      </div>
    </div>
    

    <!-- container -->
    <div class="container">

      <!-- row -->
      <div class="row">
        
        

        <div class="col-md-9" id="content-wrapper">
          <div class="document" role="main">
            <div class="documentwrapper">
              <div class="bodywrapper">
                <div class="body">
                  
  <h1>Source code for idtxl.ft2idtxl</h1><div class="highlight"><pre>
<span class="sd">&quot;&quot;&quot;Provide functions to import FieldTrip mat-files (version&gt;7.3) to IDTxl.</span>

<span class="sd">Functions in this module read the (neurophysiological) data from a FieldTrip</span>
<span class="sd">file with the basic fields necessary for its analysis with the MATLAB toolbox</span>
<span class="sd">TRENTOOL (fields ). Creates a numpy array usable as input to IDTxl.</span>

<span class="sd">Methods:</span>
<span class="sd">    ft_trial_2_numpyarray(filename, FTstructname)</span>

<span class="sd">Note:</span>
<span class="sd">    Written for Python 3.4+</span>

<span class="sd">Created on Wed Mar 19 12:34:36 2014</span>

<span class="sd">@author: Michael Wibral</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">h5py</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">idtxl.data</span> <span class="kn">import</span> <span class="n">Data</span>


<span class="k">def</span> <span class="nf">_ft_trial_2_numpyarray</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">FTstructname</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Read a matlab hdf5 file in the FieldTrip format into IDTxl.</span>

<span class="sd">    Read a matlab hdf5 file (&quot;-v7.3&#39; or higher, .mat) with a SINGLE FieldTrip</span>
<span class="sd">    data structure inside and return a numpy array with dimensions</span>
<span class="sd">    are channel x time x trials</span>

<span class="sd">    Created on Wed Mar 19 12:34:36 2014</span>

<span class="sd">    @author: Michael Wibral</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&#39;Converting FT trial cell array to numpy array&#39;</span><span class="p">)</span>
    <span class="c"># 1. create a python object that represents the hdf5 file on disk</span>
    <span class="n">FTfile</span> <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

    <span class="c"># 2.check if its an hdf5 file</span>

    <span class="c"># 3. Identify the name of the FieldTrip structure inside</span>
    <span class="c"># this will be the only name without &#39;#&#39; and without &#39;/&#39;</span>
    <span class="c"># and containing the subfields</span>
    <span class="c"># /trial, /time, /fsample, /label</span>
    <span class="c"># .. and create an object for the FieldTrip structure</span>
    <span class="n">FTstruct</span> <span class="o">=</span> <span class="n">FTfile</span><span class="p">[</span><span class="n">FTstructname</span><span class="p">]</span>  <span class="c"># TODO: FTstructname = automagic...</span>

    <span class="c"># 4. get the trial cells that contain the references (pointers) to the data</span>
    <span class="c"># we need Note: a valid FT matlab structure always contains the field</span>
    <span class="c"># &#39;trial&#39;</span>
    <span class="n">trial</span> <span class="o">=</span> <span class="n">FTstruct</span><span class="p">[</span><span class="s">&#39;trial&#39;</span><span class="p">]</span>

    <span class="c"># 5. Get the trial data (matrices in cells of a 1xnumtrials cell array in</span>
    <span class="c"># the original FieldTrip matlab structure ) by there references stored in</span>
    <span class="c"># the trial variable</span>
    <span class="k">for</span> <span class="n">tt</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">trial</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="c"># oh yes,... zero based indexing.. :-)</span>
        <span class="k">if</span> <span class="n">tt</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>

            <span class="c"># this is one such array, with a single obejct reference inside...</span>
            <span class="n">trialref</span> <span class="o">=</span> <span class="n">trial</span><span class="p">[</span><span class="n">tt</span><span class="p">]</span>
            <span class="c"># this finally pulls out the numeric data for the trial by a</span>
            <span class="c"># (region) reference</span>
            <span class="n">trialdatatmp</span> <span class="o">=</span> <span class="n">FTfile</span><span class="p">[</span><span class="n">trialref</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
            <span class="n">trialdata_shape</span> <span class="o">=</span> <span class="n">trialdatatmp</span><span class="o">.</span><span class="n">shape</span>
            <span class="k">print</span><span class="p">(</span><span class="s">&#39;Found data with first dimension: {0}, and second: {1}&#39;</span>
                  <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">trialdata_shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">trialdata_shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
            <span class="c"># convert to numpy</span>
            <span class="n">nptrialdatatmp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">trialdatatmp</span><span class="p">)</span>
            <span class="c"># the shape of the numpy array for a single trial</span>
            <span class="n">npsingletrialdatashape</span> <span class="o">=</span> <span class="n">nptrialdatatmp</span><span class="o">.</span><span class="n">shape</span>
            <span class="c"># tuples are immutable we have to create a new one to</span>
            <span class="c"># add information on the number of trials</span>
            <span class="n">geometry</span> <span class="o">=</span> <span class="n">npsingletrialdatashape</span> <span class="o">+</span> <span class="p">(</span><span class="n">trial</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],)</span>
            <span class="c"># create a numpy array to hold the data from all trials,</span>
            <span class="c"># dimensions are channel x time x trials</span>
            <span class="n">NPData</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">geometry</span><span class="p">)</span>
            <span class="c"># fill with the first trial</span>
            <span class="n">NPData</span><span class="p">[:,</span> <span class="p">:,</span> <span class="n">tt</span><span class="p">]</span> <span class="o">=</span> <span class="n">nptrialdatatmp</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># if it&#39;s not the first trial, simply fill the main numpy array</span>
            <span class="c"># with the other trials</span>
            <span class="n">trialref</span> <span class="o">=</span> <span class="n">trial</span><span class="p">[</span><span class="n">tt</span><span class="p">]</span>
            <span class="n">trialdatatmp</span> <span class="o">=</span> <span class="n">FTfile</span><span class="p">[</span><span class="n">trialref</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
            <span class="n">nptrialdatatmp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">trialdatatmp</span><span class="p">)</span>
            <span class="n">NPData</span><span class="p">[:,</span> <span class="p">:,</span> <span class="n">tt</span><span class="p">]</span> <span class="o">=</span> <span class="n">nptrialdatatmp</span>

    <span class="n">FTfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">NPData</span>


<span class="k">def</span> <span class="nf">_ft_label_2_list</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">FTstructname</span><span class="p">):</span>
    <span class="c"># for details of the data handling see comments in ft_trial_2_numpyarray</span>
    <span class="n">FTfile</span> <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">FTstruct</span> <span class="o">=</span> <span class="n">FTfile</span><span class="p">[</span><span class="n">FTstructname</span><span class="p">]</span>
    <span class="n">FTlabel</span> <span class="o">=</span> <span class="n">FTstruct</span><span class="p">[</span><span class="s">&#39;label&#39;</span><span class="p">]</span>

    <span class="k">print</span><span class="p">(</span><span class="s">&#39;Converting FT labels to python list of strings&#39;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">ll</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FTlabel</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="k">if</span> <span class="n">ll</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">labelref</span> <span class="o">=</span> <span class="n">FTlabel</span><span class="p">[</span><span class="n">ll</span><span class="p">]</span>
            <span class="c"># there is only one item in labelref, but we have to index it</span>
            <span class="c"># matlab has character arrays that are read as bytes in python 3</span>
            <span class="c"># here, map maps the stuff in labeltmp to characters and &quot;&quot;.</span>
            <span class="c"># makes it into a real python string</span>
            <span class="n">labeltmp</span> <span class="o">=</span> <span class="n">FTfile</span><span class="p">[</span><span class="n">labelref</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
            <span class="n">strlabeltmp</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">chr</span><span class="p">,</span> <span class="n">labeltmp</span><span class="p">[</span><span class="mi">0</span><span class="p">:]))</span>
            <span class="n">label</span> <span class="o">=</span> <span class="p">[</span><span class="n">strlabeltmp</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">labelref</span> <span class="o">=</span> <span class="n">FTlabel</span><span class="p">[</span><span class="n">ll</span><span class="p">]</span>
            <span class="n">labeltmp</span> <span class="o">=</span> <span class="n">FTfile</span><span class="p">[</span><span class="n">labelref</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
            <span class="n">strlabeltmp</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">chr</span><span class="p">,</span> <span class="n">labeltmp</span><span class="p">[</span><span class="mi">0</span><span class="p">:]))</span>
            <span class="n">label</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">strlabeltmp</span><span class="p">)</span>

<span class="c"># just for debi=ugging</span>
<span class="c">#     for plabel in label:</span>
<span class="c">#         print(plabel)</span>
    <span class="n">FTfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">label</span>

<span class="c">#     for plabel in label:</span>
<span class="c">#         print(plabel)</span>


<span class="k">def</span> <span class="nf">_ft_time_2_numpyarray</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">FTstructname</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&#39;Converting FT time cell array to numpy array&#39;</span><span class="p">)</span>
    <span class="c"># for details of the data handling see comments in ft_trial_2_numpyarray</span>
    <span class="n">FTfile</span> <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">FTstruct</span> <span class="o">=</span> <span class="n">FTfile</span><span class="p">[</span><span class="n">FTstructname</span><span class="p">]</span>
    <span class="n">FTtime</span> <span class="o">=</span> <span class="n">FTstruct</span><span class="p">[</span><span class="s">&#39;time&#39;</span><span class="p">]</span>  <span class="c"># a  dataset (full of object references, one for each trial)</span>

    <span class="k">for</span> <span class="n">tt</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">FTtime</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="k">if</span> <span class="n">tt</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c"># get the reference (it&#39;s still inside an array)</span>
            <span class="c"># unpack the reference from the array it&#39;s in and ...</span>
            <span class="c"># get the data for the reference</span>
            <span class="n">timeref</span> <span class="o">=</span> <span class="n">FTtime</span><span class="p">[</span><span class="n">tt</span><span class="p">]</span>
            <span class="n">timeaxistmp</span> <span class="o">=</span> <span class="n">FTfile</span><span class="p">[</span><span class="n">timeref</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
            <span class="n">nptimeaxistmp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">timeaxistmp</span><span class="p">)</span>

            <span class="c"># create an empty numpy array with the right shape</span>
            <span class="n">npsingletimeaxisshape</span> <span class="o">=</span> <span class="n">nptimeaxistmp</span><span class="o">.</span><span class="n">shape</span>
            <span class="n">geometry</span> <span class="o">=</span> <span class="n">npsingletimeaxisshape</span> <span class="o">+</span> <span class="p">(</span><span class="n">FTtime</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],)</span>
            <span class="n">NPtime</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">empty</span><span class="p">(</span><span class="n">geometry</span><span class="p">)</span>
            <span class="c"># and fill it with the data</span>
            <span class="n">NPtime</span><span class="p">[:,</span> <span class="p">:,</span> <span class="n">tt</span><span class="p">]</span> <span class="o">=</span> <span class="n">nptimeaxistmp</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c"># get the reference (it&#39;s still inside an array) unpack the</span>
            <span class="c"># reference from the array it&#39;s in and ... get the data for the</span>
            <span class="c"># reference</span>
            <span class="n">timeref</span> <span class="o">=</span> <span class="n">FTtime</span><span class="p">[</span><span class="n">tt</span><span class="p">]</span>
            <span class="n">timeaxistmp</span> <span class="o">=</span> <span class="n">FTfile</span><span class="p">[</span><span class="n">timeref</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
            <span class="n">nptimeaxistmp</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">timeaxistmp</span><span class="p">)</span>
            <span class="n">NPtime</span><span class="p">[:,</span> <span class="p">:,</span> <span class="n">tt</span><span class="p">]</span> <span class="o">=</span> <span class="n">nptimeaxistmp</span>
    <span class="n">FTfile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">NPtime</span>


<span class="k">def</span> <span class="nf">_ft_fsample_2_float</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">FTstructname</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&#39;Converting FT fsample array (1x1) to numpy array (1x1)&#39;</span><span class="p">)</span>
    <span class="n">FTfile</span> <span class="o">=</span> <span class="n">h5py</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">FTstruct</span> <span class="o">=</span> <span class="n">FTfile</span><span class="p">[</span><span class="n">FTstructname</span><span class="p">]</span>
    <span class="n">FTfsample</span> <span class="o">=</span> <span class="n">FTstruct</span><span class="p">[</span><span class="s">&#39;fsample&#39;</span><span class="p">]</span>
    <span class="n">NPfsample</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">FTfsample</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">NPfsample</span>


<span class="c"># Note: Maybe all these functions should be combined into one convft2txl</span>
<span class="c"># function that creates a dictionary with the keys:  &#39;trial&#39;, &#39;label&#39;, &#39;time&#39;,</span>
<span class="c"># &#39;fsample&#39;</span>

<div class="viewcode-block" id="ft2idtxlconverter"><a class="viewcode-back" href="../../idtxl.html#idtxl.ft2idtxl.ft2idtxlconverter">[docs]</a><span class="k">def</span> <span class="nf">ft2idtxlconverter</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">FTstructname</span><span class="p">,</span> <span class="n">fileversion</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convert FieldTrip-style MATLAB-file into an IDTxl Data object.</span>

<span class="sd">    Import a MATLAB structure with fields  &quot;trial&quot; (data), &quot;label&quot; (channel</span>
<span class="sd">    labels), &quot;time&quot; (time stamps for data samples), and &quot;fsample&quot; (sampling</span>
<span class="sd">    rate). This structure is the standard file format in the MATLAB toolbox</span>
<span class="sd">    FieldTrip and commonly use to represent neurophysiological data (see also</span>
<span class="sd">    http://www.fieldtriptoolbox.org/). The functions reads a mat-file from</span>
<span class="sd">    disc and returns a dictionary containing the information in the mat-file.</span>
<span class="sd">    Data is represented as an IDTxl Data object.</span>

<span class="sd">    Args:</span>
<span class="sd">        filename : string</span>
<span class="sd">            full (matlab) filename on disk</span>
<span class="sd">        FTstructname : string</span>
<span class="sd">            variable name of the MATLAB structure that is in FieldTrip format</span>
<span class="sd">            (autodetect will hopefully be possible later ...)</span>
<span class="sd">        fileversion : string</span>
<span class="sd">            version of the file, e.g. &quot;v7.3&quot; for MATLAB&#39;s 7.3 format</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict</span>
<span class="sd">            &quot;dataset&quot;: instance of IDTxl Data object; &quot;label&quot;: list of channel</span>
<span class="sd">            labels; &quot;time&quot;: numpy array of time stamps; &quot;fsample&quot;: sampling </span>
<span class="sd">            rate</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c"># TODO: This will need better error handling !</span>
    <span class="k">if</span> <span class="n">fileversion</span> <span class="o">==</span> <span class="s">&quot;v7.3&quot;</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;Creating Python dictionary from FT data structure: &#39;</span> <span class="o">+</span>
              <span class="n">FTstructname</span><span class="p">)</span>
        <span class="n">NPData</span> <span class="o">=</span> <span class="n">_ft_trial_2_numpyarray</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">FTstructname</span><span class="p">)</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">_ft_label_2_list</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">FTstructname</span><span class="p">)</span>
        <span class="n">NPfsample</span> <span class="o">=</span> <span class="n">_ft_fsample_2_float</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">FTstructname</span><span class="p">)</span>
        <span class="n">NPtime</span> <span class="o">=</span> <span class="n">_ft_time_2_numpyarray</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">FTstructname</span><span class="p">)</span>
        <span class="c"># convert data into IDTxl&#39;s Data class</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">Data</span><span class="p">()</span>
        <span class="c"># fieldtrip had &quot;channel x timesamples&quot; data,</span>
        <span class="c"># but numpy sees the data as stored internally in the hdf5 file as:</span>
        <span class="c"># &quot;timesamples x channel&quot;</span>
        <span class="c"># we collected the replications</span>
        <span class="c"># in the tirhd diemsnion --&gt; dimension are:</span>
        <span class="c"># s(amples) x p(rocesses) x r(eplications) = &#39;spr&#39;</span>
        <span class="n">d</span><span class="o">.</span><span class="n">set_data</span><span class="p">(</span><span class="n">NPData</span><span class="p">,</span> <span class="s">&#39;spr&#39;</span><span class="p">)</span>
        <span class="n">TXLdata</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;dataset&quot;</span><span class="p">:</span> <span class="n">d</span><span class="p">,</span>
                   <span class="s">&quot;label&quot;</span><span class="p">:</span> <span class="n">label</span><span class="p">,</span>
                   <span class="s">&quot;time&quot;</span><span class="p">:</span> <span class="n">NPtime</span><span class="p">,</span>
                   <span class="s">&quot;fsample&quot;</span><span class="p">:</span> <span class="n">NPfsample</span><span class="p">}</span>

<span class="c">#        except(OSError, RuntimeError):</span>
<span class="c">#            print(&#39;incorrect file version, the given file was not a MATLAB&#39;</span>
<span class="c">#                  &#39; m-file version 7.3&#39;)</span>
<span class="c">#            return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&#39;At present only m-files in format 7.3 are aupported,&#39;</span>
              <span class="s">&#39;please consider reopening and resaving your m-file in that&#39;</span>
              <span class="s">&#39;version&#39;</span><span class="p">)</span>
        <span class="c"># TODO we could write a fallback option using numpy&#39;s loadmat?</span>
    <span class="k">return</span> <span class="n">TXLdata</span></div>
</pre></div>

                </div>
              </div>
            </div>
          </div>
        </div>
         
<div class="col-md-3 hidden-xs" id="sidebar-wrapper">
  <div class="sidebar hidden-xs" role="navigation" aria-label="main navigation">
<div id="searchbox" role="search">
  <h3>Quick search</h3>
  <form class="search form-inline" action="../../search.html" method="get">
      <div class="input-append input-group">
        <input type="text" class="search-query form-control" name="q" placeholder="Search...">
        <span class="input-group-btn">
        <input type="submit" class="btn" value="Go" />
        </span>
      </div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
  </div>
</div> 
        
      </div><!-- /row -->

      <!-- row -->
      <div class="row footer-relbar">
<div id="navbar-related" class=" related navbar navbar-default" role="navigation" aria-label="related navigation">
  <div class="navbar-inner">
    <ul class="nav navbar-nav ">
        <li><a href="../../index.html">IDTxl 0.1 documentation</a></li>
    </ul>
<ul class="nav navbar-nav pull-right hidden-xs hidden-sm">
      
        <li><a href="../../py-modindex.html" title="Python Module Index" >modules</a></li>
        <li><a href="../../genindex.html" title="General Index" >index</a></li>
        <li><a href="../index.html" >Module code</a></li>
        <li><a href="#">top</a></li> 
      
    </ul>
  </div>
</div>
      </div><!-- /row -->

      <!-- footer -->
      <footer role="contentinfo">
          &copy; Copyright 2016, Patricia Wollstadt, Michael Wibral, Joe T. Lizier, Finn Connor, Raul Vicente.
        Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.2.
      </footer>
      <!-- /footer -->

    </div>
    <!-- /container -->

  </body>
</html>